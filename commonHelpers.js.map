{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst URL = \"https://pixabay.com/api/\"\n\nexport default async function createHTTPRequest(params) {\n    try {\n      const response = await axios.get(URL, params);\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  }","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function createListImg(data) {\nconst galleryList = document.querySelector('.gallery');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nlet imgMarkup = data.hits.map((image) => `\n<div class='gallery-div'>\n<a href= \"${image.largeImageURL}\">\n<img class= \"gallery-img\" src = \"${image.webformatURL}\" alt= \"${image.tags}\"></img>\n</a>\n<div class=\"text-div\">\n<div class=\"text-item\"><h5 class=\"text-title\">Likes</h5><p class=\"text\">${image.likes}</p></div>\n<div class=\"text-item\"><h5 class=\"text-title\">Views</h5><p class=\"text\">${image.views}</p></div>\n<div class=\"text-item\"><h5 class=\"text-title\">Comments</h5><p class=\"text\">${image.comments}</p></div>\n<div class=\"text-item\"><h5 class=\"text-title\">Downloads</h5><p class=\"text\">${image.downloads}</p></div>\n</div>\n</div>`).join('');\n\ngalleryList.insertAdjacentHTML('beforeend', imgMarkup);\nlightbox.refresh();\n}\n\nexport function removeListImg() {\nconst galleryList = document.querySelector('.gallery');\ngalleryList.innerHTML = '';\n}\n\nexport function loading() {\nconst loading = document.querySelector('.loading-div');\nloading.innerHTML = '<span class=\"loader\"></span>';\n}\n\nexport function removeLoading() {\nconst loading = document.querySelector('.loading-div');\nloading.innerHTML = '';\n}\n\n// button Load more\n\nexport class ButtonMethods {\nconstructor(button, hiddenClass) {\n    this.button = button;\n    this.hiddenClass = hiddenClass;\n}\n\nhide() {\n    this.button.classList.add(this.hiddenClass);\n    }\n\nshow() {\n    this.button.classList.remove(this.hiddenClass);\n    }\n\ndisable() {\n    this.button.disabled = true;\n}\n\nenable() {\n    this.button.disabled = false;\n}\n}\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport createHTTPRequest from './js/pixabay-api.js'\nimport {createListImg, removeListImg, loading, removeLoading, ButtonMethods} from './js/render-functions.js'\n\nconst form = document.querySelector('.result-receiver')\nconst input = document.querySelector('#search')\nconst button = document.querySelector('[data-start]')\nconst buttonLoad = document.querySelector('.load-button')\n\n\nlet value = '';\nlet totalHits = 0;\nlet currentPage = 1;\nlet totalHitsToLoad = 0;\n\nconst loadMoreButton = new ButtonMethods(buttonLoad, 'is-hidden');\nloadMoreButton.hide();\n\ncheckButton()\n\ndocument.addEventListener('input', checkButton)\ndocument.addEventListener('submit', searchImg)\nbuttonLoad.addEventListener('click', loadMore)\n\n\n\n// function\n\nfunction checkButton() {\nif (input.value.trim().length === 0){\nbutton.setAttribute('disabled', '');\n} else {\nbutton.removeAttribute('disabled');\n}\n}\n\n\nfunction searchImg(e) {\ne.preventDefault();\nremoveListImg();\n\nloading()\n\nvalue = input.value\n\nconst params = {\n    params: {\n    key: \"45153082-ab6ff3a7cbec10f23fcc6c616\",\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: 15,\n    maxPage: 0,\n    }\n}\n\n\n\ncreateHTTPRequest(params)\n.then((data)=> {\n    totalHits = data.totalHits\n    if (data.hits.length === 0) {\n        loadMoreButton.hide()\n        loadMoreButton.disable()\n        throw new Error('No images found');\n    }else{\n        loadMoreButton.show()\n        loadMoreButton.enable()\n        createListImg(data)\n    }\n})\n.catch(()=>{\n iziToast.show({\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n    color: 'red',\n    image: './img/cat_error.jpg',\n    imageWidth: 60,\n    position: 'topRight'\n})\n})\n.finally(() => {\nif (currentPage * 15 >= totalHits) {\n    loadMoreButton.disable()\n    loadMoreButton.hide()\n}\nremoveLoading()\nform.reset()\ncheckButton()\n})\ncurrentPage = 1\n}\n\nfunction loadMore(){\nloading()\n\nconst params = {\n    params: {\n    key: \"45153082-ab6ff3a7cbec10f23fcc6c616\",\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: 15,\n    }\n}\n\ncreateHTTPRequest(params)\n.then((data)=>{\n    console.log(data)\n    totalHits = data.totalHits\nremoveLoading()\n\ntry {\ncreateListImg(data)\n\nconst galleryItems = document.querySelectorAll('.gallery-div a');\nif (galleryItems.length > 0) {\n    const lastElement = galleryItems[galleryItems.length - 1];\n    const cardHeight = lastElement.getBoundingClientRect().height;\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth'\n    });\n}\n    \nif (currentPage * 15 >= totalHits) {\n    throw new Error('No images found');\n}\n    currentPage += 1\n    loadMoreButton.show()\n    loadMoreButton.enable()\n}catch (error) {\n    loadMoreButton.disable()\n    loadMoreButton.hide()\n    iziToast.error({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    color: 'blue',\n    position: 'topRight',\n    image: './img/cat_error2.jpg',\n    imageWidth: 55,\n    icon: '',\n})}\n})\n}\n"],"names":["URL","createHTTPRequest","params","axios","error","createListImg","data","galleryList","lightbox","SimpleLightbox","imgMarkup","image","removeListImg","loading","removeLoading","ButtonMethods","button","hiddenClass","form","input","buttonLoad","value","totalHits","currentPage","loadMoreButton","checkButton","searchImg","loadMore","e","iziToast","galleryItems","cardHeight"],"mappings":"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"}